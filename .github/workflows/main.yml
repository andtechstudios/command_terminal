name: Deploy as UPM
on:
  create:
    tags:
      - v*

jobs:
  deploy:
    runs-on: ubuntu-latest    
    steps:
    - uses: actions/checkout@v2
      with:
        ref: master
    - run: |
        cd src/Assets/Console
        npm version ${{github.ref_name}} --allow-same-version
    - uses: s0/git-publish-subdir-action@develop
      env:
        REPO: self
        BRANCH: upm
        FOLDER: src/Assets/Console
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
